-- Create oauth2_authorization table
CREATE TABLE PUBLIC.OAUTH2_AUTHORIZATION (
    ID UUID NOT NULL DEFAULT UUID_GENERATE_V4(),
    REGISTERED_CLIENT_ID UUID NOT NULL,
    PRINCIPAL_NAME CHARACTER VARYING(200) NOT NULL,
    AUTHORIZATION_GRANT_TYPE CHARACTER VARYING(100) NOT NULL,
    AUTHORIZED_SCOPES CHARACTER VARYING(1000),
    ATTRIBUTES TEXT,
    STATE CHARACTER VARYING(500),
    AUTHORIZATION_CODE_VALUE TEXT,
    AUTHORIZATION_CODE_ISSUED_AT TIMESTAMP WITH TIME ZONE,
    AUTHORIZATION_CODE_EXPIRES_AT TIMESTAMP WITH TIME ZONE,
    AUTHORIZATION_CODE_METADATA TEXT,
    ACCESS_TOKEN_VALUE TEXT,
    ACCESS_TOKEN_ISSUED_AT TIMESTAMP WITH TIME ZONE,
    ACCESS_TOKEN_EXPIRES_AT TIMESTAMP WITH TIME ZONE,
    ACCESS_TOKEN_METADATA TEXT,
    ACCESS_TOKEN_TYPE CHARACTER VARYING(100),
    ACCESS_TOKEN_SCOPES CHARACTER VARYING(1000),
    OIDC_ID_TOKEN_VALUE TEXT,
    OIDC_ID_TOKEN_ISSUED_AT TIMESTAMP WITH TIME ZONE,
    OIDC_ID_TOKEN_EXPIRES_AT TIMESTAMP WITH TIME ZONE,
    OIDC_ID_TOKEN_METADATA TEXT,
    REFRESH_TOKEN_VALUE TEXT,
    REFRESH_TOKEN_ISSUED_AT TIMESTAMP WITH TIME ZONE,
    REFRESH_TOKEN_EXPIRES_AT TIMESTAMP WITH TIME ZONE,
    REFRESH_TOKEN_METADATA TEXT,
    USER_CODE_VALUE TEXT,
    USER_CODE_ISSUED_AT TIMESTAMP WITH TIME ZONE,
    USER_CODE_EXPIRES_AT TIMESTAMP WITH TIME ZONE,
    USER_CODE_METADATA TEXT,
    DEVICE_CODE_VALUE TEXT,
    DEVICE_CODE_ISSUED_AT TIMESTAMP WITH TIME ZONE,
    DEVICE_CODE_EXPIRES_AT TIMESTAMP WITH TIME ZONE,
    DEVICE_CODE_METADATA TEXT,
    PRIMARY KEY (ID),
    FOREIGN KEY (REGISTERED_CLIENT_ID) REFERENCES PUBLIC.OAUTH2_REGISTERED_CLIENT(ID)
);